---
title: Fundamentos de R
author: Ingenier√≠a de Sistemas, Licenciatura en Tecnolog√≠a Ambiental y Profesorado de Matem√°ticas.

output:
  prettydoc::html_pretty:
    theme: cayman
    highlight: github

---

> Fundamentos basicos del lenguaje de programaci√≥n R
> en el contexto de la catedra Probabilidad y Estadistica


# Introducion

El lenguaje de programaci√≥n R se integra bien con otros lenguajes de programaci√≥n para realizar tareas de an√°lisis de datos computacionalmente intensivas (alto consumo de recursos como CPU y RAM). Adem√°s, puede integrarse con distintas bases de datos y existen bibliotecas que facilitan su utilizaci√≥n desde lenguajes de programaci√≥n interpretados como Perl y Python.

R es algo m√°s que un lenguaje de programaci√≥n. El usuario no programa propiamente, sino que utiliza R interactivamente: ensaya, se equivoca y vuelve a probar. Solo cuando termina el ciclo y el resultado es satisfactorio, produce un resultado final que, generalmente, no es un programa, sino un informe.

## Caracteristicas

R es un lenguaje de programaci√≥n interpretado es decir que no se compila para generar un ejecutable, sino que las sentencias son interpretadas y ejecutadas din√°micamente produciendo efectos sobre el ambiente, por ejemplo, creando variables. Estas variables permanecer√°n disponibles para ser consultadas por la/las pr√≥ximas sentencias en caso de ser necesario. 

R es un leguaje de programaci√≥n funcional! Es decir, nos provee un mont√≥n de herramientas para la creaci√≥n y manipulaci√≥n de funciones. Pero en nuestro caso no vamos a necesitar programar nuestras propias funciones ya que R tiene lista una colecci√≥n de funciones de estad√≠stica listas para utilizar üòé üëç

Particularmente nos vamos a centrar en las siguientes:

```{r eval=FALSE}

# Para la manipulaci√≥n de los datos:

datos <- c(1,2,3,4,5,6)  # Creaci√≥n de vectores o listas (Ojo aca arrancan en 1!)

length(datos)   # Cantidad total de datos
min(datos)      # M√≠nimo
max(datos)      # M√°ximo
sum(datos)      # Suma del total de los datos
mean(datos)     # Media
median(datos)   # Mediana
var(datos)      # Varianza
sd(datos)       # Desvio estandar

cv <- sd(datos)/mean(datos) # Guardamos en la variable cv el Coeficiente de Variaci√≥n 

quantile(datos, c(0.25,0.50,0.75)) # Cuartiles

# Para la creaci√≥n de gr√°ficos:

hist(datos, ...)      # Histograma
boxplot(datos, ...)   # Diagrama de caja o Box plot 
pie(datos, ...)       # Gr√°fico de torta


# Para lo que quieran investigar un poco mas:

seq(desde, hasta, avance)           # Para la creaci√≥n de secuencias
cut(datos, intervalos)              # Armar intervalos
tabla <- data.frame(table(datos))   # Para armar una tabla con la frecuencia de los datos
colnames(tabla)[1] <- "Col1"        # Cambiar nombres de las columnas
tabla$DobleDeCol1 <- tabla$Col1*2   # Consultar columnas y hacer operaciones entre las mismas

rev(c(1,2,3,4))                     # Invertir un vector, arreglo, lista o columna
# [1] 4 3 2 1
cumsum(c(1,1,1,1))                  # Suma acumulada de un vector, arreglo, lista o columna
# [1] 1 2 3 4


help("hist")  # Para obtener la documentaci√≥n oficial de cualquier funci√≥n!!! 

# Tambi√©n recuerden que con print("Hola Mundo!") pueden mostrar en la consola
# Pero si ejecutan el nombre de una variable o funci√≥n a secas les imprime el contenido

```

----------
## Practiquemos con un ejemplo!
### Ejercicio 11

5.11 Para los 88 estudiantes que participaron de una evaluaci√≥n tomada por un investigador en un colegio se obtuvieron los siguientes puntajes:


<center> 
```
84 85 87 72 88 87 86 88 80 82 88 76 75 85 81 93 84 80 83 89 83 88
87 80 80 87 84 83 88 85 98 85 91 83 78 82 85 80 80 92 76 81 75 86
84 82 89 85 88 85 89 83 87 85 85 80 92 86 78 89 88 81 90 85 72 87
80 87 83 89 80 90 90 87 72 87 82 85 78 80 90 77 84 84 89 79 81 85

```
</center>

a) Formar la distribuci√≥n de frecuencias con intervalos de amplitud 5
b) Trazar el histograma y el pol√≠gono
c) Formar la distribuci√≥n de porcentajes acumulado
d) ¬øCu√°l es el puntaje m√°s t√≠pico?
e) ¬øCu√°l es el recorrido de los puntajes?
f) ¬øQu√© porcentaje de estudiantes tuvo un puntaje de menos de 80?
g) El 85% de los estudiantes tuvo puntajes menores ¬øa qu√© valor?
h) ¬øQu√© forma tiene la distribuci√≥n de los datos? Realizar un box plot.
i) Calcular las medidas de dispersi√≥n que considere apropiadas.

-----

#### Cargamos y mostramos los datos

> Para esto usamos la funci√≥n c(‚Ä¶)

Combine Values into a Vector or List -> Para mas info  `help("c")`

```{r}
datos <- c(
  84 ,85 ,87 ,72 ,88 ,87 ,86 ,88 ,80 ,82 ,88 ,76 ,75 ,85 ,81 ,93 ,84 ,80 ,83 ,89 ,83 ,88,
  87 ,80 ,80 ,87 ,84 ,83 ,88 ,85 ,98 ,85 ,91 ,83 ,78 ,82 ,85 ,80 ,80 ,92 ,76 ,81 ,75 ,86,
  84 ,82 ,89 ,85 ,88 ,85 ,89 ,83 ,87 ,85 ,85 ,80 ,92 ,86 ,78 ,89 ,88 ,81 ,90 ,85 ,72 ,87,
  80 ,87 ,83 ,89 ,80 ,90 ,90 ,87 ,72 ,87 ,82 ,85 ,78 ,80 ,90 ,77 ,84 ,84 ,89 ,79 ,81 ,85
)

datos



```


#### Armamos los intervalos y tabla de frecuencias  


```{r}
intervalos <- seq(70,100,5)
intervalos

tabla <- data.frame(table(cut(datos,intervalos, right = FALSE))) 
colnames(tabla)[1] <- "Intervals"
tabla 

```

Nota: 

Con `cut(datos, intervalos)` obtenemos un vector en donde cada item se corresponde uno a uno con el de los `datos` originales, solo que en lugar de los valores se encuentra el intervalo al que pertenece. Pueden jugar con el par√°metro `right` pasando TRUE o FALSE acorde a que limite del intervalo (superior o inferior) desean incluir. 

Luego con `table(...)` la tabla de intervalos con sus frecuencias. Para finalmente mediante `data.frame(...)` poder formar las columnas con su respectivo nombre y guardarlas en la variable `tabla`. Esta variable es de tipo dataframe, lu cual nos permitira recuperar las columnas con `$` y hacer operaciones entre las mismas.



  -> Para mas info:  `help("cut")`   `help("table")`   `help("data.frame")`


#### Histograma y Pol√≠gono de frecuencias

Desafortunadamente en los histogramas de R no hay una forma sencilla de incluir el pol√≠gono de frecuencias nuestro gr√°fico. Sin embargo, podemos usar la funci√≥n `lines(coordsX, coordsY)` para dibujar l√≠neas entre el conjunto de puntos que pasamos por par√°metro. Mediante esta mec√°nica logramos dibujar el pol√≠gono utilizando los valores medios de las barras del histograma, los cuales los recuperamos con `histograma$mids`. Con `histograma$counts` recuperamos las frecuencias. 

```{r}

histograma <- hist(datos,                          # Paso los datos originales
                 breaks = intervalos,              # Vector con limites de intervalos
                 xlim = c(65,105),                 # Limites eje X
                 xlab = "Puntajes",                # Titulo de eje X
                 ylab = "Frecuencia",              # Titulo de eje Y
                 main = "Histograma de puntajes")  # Titulo del Grafico

# Nota: el unico parametro obligatorio son los datos -> hist(datos) Funciona!

# El param breaks me da control sobre como se arman las barras


lines( c(67.5,c(histograma$mids),102.5) , c(0,c(histograma$counts),0) )

```


> Hasta el momento llegue hasta aca!!! 

> Todavia me queda por armar las celdas y explicar este codigo ‚Üì‚Üì‚Üì

-----------------

```{r eval=FALSE}

tabla$Freq

tabla$FrecRel <- tabla$Freq/sum(tabla$Freq)
tabla$RelPor <- tabla$FrecRel*100
tabla$PorAcu <- cumsum(tabla$RelPor)
tabla$PorDes <- rev(cumsum(rev(tabla$RelPor)))


rev(c(1,2,3,4))
cumsum(c(1,1,1,1))

pie(tabla$Freq, labels = tabla$Intervals, main = "Grafico de Frecuencias por intervalos")

quantile(datos, c(0.85))
summary(datos)

box <- boxplot(datos, horizontal = TRUE)


min(datos)
max(datos)
mean(datos)
median(datos)
var(datos)
sd(datos)
quantile(datos, c(0.25,0.50,0.75))


cv <- sd(datos)/mean(datos)
cv*100

write.csv(tabla,"ej11.csv")


pie(tabla$Freq, labels = tabla$Intervals)
pie(datos)


```

